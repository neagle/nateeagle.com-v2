<html><head><title>NateEagle.com</title></head><body><header><h1><a class="draw draw-in" href="/">Nate Eagle</a></h1></header><section class="column post"><article><time>September 21st, 2011</time><h2>Easier Post Creation for Jekyll with Bash</h2><div class="content"><p>The biggest reason to use &quot;Jekyll&quot;:<a href="https://github.com/mojombo/jekyll">https://github.com/mojombo/jekyll</a> is, in my opinion, its simplicity and convenience for people who work with files for a living. If changing directories and making files is what you do all day, then writing posts by creating files will just feel like The Way It Should Be. You&#39;ll love that you don&#39;t have to log into a web interface to add posts. If you&#39;d <em>rather</em> log into a web app, I&#39;m not sure why on earth you&#39;d use Jekyll: it&#39;s too minimalistic to offer any huge advantages over the many great CMSs out there today.</p>
<p>After a few weeks of using Jekyll, I found that it was a bit of a chore to think of today&#39;s date and type it out whenever I wanted to create a post. Since I was adding a second post type called bits to my blog for frequent, short posts it became even more of an issue.</p>
<p>So I created a bash script to make this easier.</p>
<p>I&#39;ve written about three or four bash scripts in my entire life, so it takes me a bit of time and work to look everything up. In case you&#39;re in the same boat, I&#39;m including the script below along with URLs for the references I used along with a few notes.</p>
<p>Here&#39;s the complete script:</p>
<p>{% highlight bash %}</p>
<p>#!/bin/bash</p>
<h1 id="create-a-new-post-with-today-s-date-and-prompt-for-the-title-">Create a new post with today&#39;s date and prompt for the title.</h1>
<h1 id="config">Config</h1>
<p>editor=&quot;vim&quot;
format=&quot;textile&quot;</p>
<h1 id="get-layout-via-getopts-l-">Get layout via getopts (-l)</h1>
<h1 id="-">--</h1>
<h1 id="http-wiki-bash-hackers-org-howto-getopts_tutorial"><a href="http://wiki.bash-hackers.org/howto/getopts_tutorial">http://wiki.bash-hackers.org/howto/getopts_tutorial</a></h1>
<p>while getopts &quot;:l:&quot; opt; do
    case $opt in
        l)
            layout=$OPTARG
            ;;
        :) echo &quot;$opt requires an argument&quot; &gt;&amp;2
            exit 1
            ;;
    esac
done</p>
<h1 id="set-default-config-values">Set default config values</h1>
<h1 id="-">--</h1>
<h1 id="http-www-cyberciti-biz-tips-howto-setting-default-values-for-shell-variables-html"><a href="http://www.cyberciti.biz/tips/howto-setting-default-values-for-shell-variables.html">http://www.cyberciti.biz/tips/howto-setting-default-values-for-shell-variables.html</a></h1>
<p>: ${layout:=&quot;post&quot;}</p>
<h1 id="i-like-giving-myself-a-polite-greeting-">I like giving myself a polite greeting.</h1>
<h1 id="-">--</h1>
<h1 id="date-codes-http-linux-about-com-od-commands-l-blcmdl1_date-htm">Date codes: <a href="http://linux.about.com/od/commands/l/blcmdl1_date.htm">http://linux.about.com/od/commands/l/blcmdl1_date.htm</a></h1>
<p>echo &quot;---&quot;
echo &quot;Creating a new ${layout} for&quot; <code>date +%A&quot;, &quot;%B&quot; &quot;%e&quot;, &quot;%Y</code>&quot;.&quot;
echo &quot;&quot;
read -p &quot;Enter the title: &quot; title </p>
<h1 id="turn-spaces-into-dashes">Turn spaces into dashes</h1>
<h1 id="-">--</h1>
<h1 id="http-stackoverflow-com-questions-1469849-how-to-split-one-string-into-multiple-strings-in-bash-shell"><a href="http://stackoverflow.com/questions/1469849/how-to-split-one-string-into-multiple-strings-in-bash-shell">http://stackoverflow.com/questions/1469849/how-to-split-one-string-into-multiple-strings-in-bash-shell</a></h1>
<p>for word in $title
do
    dashedTitle=${dashedTitle}-${word}
done</p>
<h1 id="convert-title-to-lowercase">Convert title to lowercase</h1>
<h1 id="-">--</h1>
<h1 id="http-stackoverflow-com-questions-2264428-converting-string-to-lower-case-in-bash-shell-scripting"><a href="http://stackoverflow.com/questions/2264428/converting-string-to-lower-case-in-bash-shell-scripting">http://stackoverflow.com/questions/2264428/converting-string-to-lower-case-in-bash-shell-scripting</a></h1>
<h1 id="http-www-kclug-org-pipermail-kclug-2003-april-015084-html"><a href="http://www.kclug.org/pipermail/kclug/2003-April/015084.html">http://www.kclug.org/pipermail/kclug/2003-April/015084.html</a></h1>
<p>dashedTitle=&quot;<code>echo ${dashedTitle} | tr &#39;[A-Z]&#39; &#39;[a-z]&#39;</code>&quot;</p>
<h1 id="create-a-filename-with-the-date-dashed-title-and-format">Create a filename with the date, dashed title, and format</h1>
<p>filename=&quot;<code>date +%Y-%m-%d</code>${dashedTitle}.${format}&quot;</p>
<p>echo $filename</p>
<p>touch $filename</p>
<h1 id="add-initial-yaml-to-the-top-of-the-new-bit">Add initial YAML to the top of the new bit</h1>
<p>echo &quot;---&quot; &gt;&gt; $filename
echo &quot;layout: ${layout}&quot; &gt;&gt; $filename
echo &quot;title: \&quot;${title}\&quot;&quot; &gt;&gt; $filename
echo &quot;summary:&quot; &gt;&gt; $filename
echo &quot;---&quot; &gt;&gt; $filename
echo &quot;&quot; &gt;&gt; $filename</p>
<h1 id="open-in-vim-and-go-to-the-end-of-the-file-">Open in vim and go to the end of the file ( + )</h1>
<h1 id="-">--</h1>
<h1 id="http-stackoverflow-com-questions-268123-vim-how-to-start-inserting-at-the-end-of-the-file-in-one-step"><a href="http://stackoverflow.com/questions/268123/vim-how-to-start-inserting-at-the-end-of-the-file-in-one-step">http://stackoverflow.com/questions/268123/vim-how-to-start-inserting-at-the-end-of-the-file-in-one-step</a></h1>
<p>${editor} + $filename
{% endhighlight %}</p>
<p>You&#39;ll notice I created a layout option that can be passed in using @-l@. I use multiple post layouts on the blog, the most important of which are <em>post</em> and <em>bit</em>. Bits are very small posts that aren&#39;t included in the main list on the homepage or in my Atom feed.</p>
<p>I created two aliases (these should go in your @.bashrc@ file) to simplify creation of posts and bits:</p>
<p>{% highlight bash %}
alias post=&quot;./post.sh&quot;
alias bit=&quot;./post.sh -l bit&quot;
{% endhighlight %}</p>
<p>The script uses post as the default type. On running, the script</p>
<ul>
<li>prompts me for a title</li>
<li>uses today&#39;s date plus a lowercase and dash-separated version of the title for the new post&#39;s filename</li>
<li>prepopulates the post with the YAML I use for posts</li>
<li>opens the new post in vim</li>
</ul>
<p>So to create this post, I typed:</p>
<p>{% highlight bash %}
$ post
$ ---
$ Creating a new post for Wednesday, September 21, 2011.
$ 
$ Enter the title: Easier Post Creation for Jekyll with Bash
{% endhighlight %}</p>
<p>This created @2011-09-21-easier-post-creation-for-jekyll-with-bash.textile@, added my YAML, and popped it up in vim. Nice.</p>
<p>h3. One last item on my wish list </p>
<p>I&#39;d really like to find a solution for tab completion when I have a directory full of similarly prefixed files.</p>
<p>{% highlight bash %}
2011-08-30-upholstery-a-css3-pattern.textile                 2011-09-09-my-first-compass-mixin-text-3d.textile            2011-09-21-easier-post-creation-for-jekyll-with-bash.textile
2011-08-31-how-to-output-curly-brackets-in-jekyll.textile    2011-09-11-color-ripples-canvas-toy.textile                  2011-09-21-open-a-directory-in-finder-from-terminal.textile
2011-08-31-jekyll-not-parsing-includes.textile               2011-09-13-compass.textile 
{% endhighlight %}</p>
<p>If I have a directory like the one above, I&#39;d love to be able to type @col<TAB>@ and have it expand to @2011-09-11-color-ripples-canvas-toy.textile@. In other words, the completion regex would match for a date string and disregard that prefix when matching filenames.</p>
<p>This may well be possible - even trivial - for someone smarter than I. I did find a great example of &quot;something similar&quot;:<a href="http://stackoverflow.com/questions/3238983/writing-a-custom-bash-completion-rule">http://stackoverflow.com/questions/3238983/writing-a-custom-bash-completion-rule</a> for vim that&#39;ll let you add a @.completion@ file to any directory with a static prefix that will allow you to type, say, @vim <TAB>@ and have it expand to @vim _myprefix@.</p>
<p>Let me know if you have any suggestions for my bash script - as I said, I&#39;m a bash n00b, and feedback is welcome.</p>
</div></article><div id="disqus_thread"><script>var disqus_shortname = 'nateeagle',
	disqus_developer = 1,
	disqus_url = 'http://nateeagle.com';

	(function() {
		var d = document, s = d.createElement('script');
		s.src = `https://${disqus_shortname}.disqus.com/embed.js`;
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
	})();</script></div></section><script src="/bundle.js"></script></body></html>